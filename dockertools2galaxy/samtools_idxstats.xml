<tool id="samtools_idxstats" name="IdxStats" version="2.0">
	<description>tabulate mapping statistics for BAM dataset</description>
	<requirements>
		<container type="docker">testsamtools:latest</container>
	</requirements>
	<stdio>
		<exit_code description="Error" level="fatal" range="1:" />
		</stdio>
	<command>&lt;![CDATA[ \nif [ ! -f "${input}.bai" ] ; then 
   ln -s "${input}" input.bam ; 
   samtools sort -o sorted.bam -O bam -T sts "${input}" ; 
   samtools index sorted.bam ; 
   samtools idxstats sorted.bam &gt; "${output}" ; \nelse 
   samtools idxstats "${input}" &gt; "${output}" ; \nfi]]&gt;</command>
	<inputs>
		<param format="bam" label="BAM file" name="input" type="data" />
	</inputs>
	<outputs>
		<data format="tabular" label="${tool.name} on ${on_string}" name="output" />
	</outputs>
	<help>
	help_text
	</help>
	<citations>
		<citation type="bibtex">
			@misc{SAM_def,
			title={Definition of SAM/BAM format},
			url = {https://samtools.github.io/hts-specs/SAMv1.pdf},}
		</citation>
		<citation type="doi">10.1093/bioinformatics/btp352</citation>
	</citations>
</tool>